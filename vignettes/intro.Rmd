---
title: "intro"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{intro}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(readr)
library(ggplot2)
```

The Working Directory inside this Rmarkdown *chunk* is listed below:
```{r eval = TRUE}
getwd()
```

UHURU studies the effect of herbivores on the plants in Kenya.

This data set focuses on the effects of different treatments on Acacia trees.
These *treatments* are different areas of Kenya, where predation levels (and species) are diversified.

We will first call the file, based on the current directory. Then we will use `read.table()` to access the file. 

Using `eval = TRUE` displays the data.

``` {r Pull & Create tsv, eval  = TRUE}
## Provide file using a relative path ##
acacia_csv <- ("../data-raw/ACACIA_DREPANOLOBIUM_SURVEY.txt")
## add `na.strings = "dead"
acacia <- read.table(acacia_csv, header = TRUE, sep = "\t", fill = TRUE)
```

What can we quickly find out from this data set?

There are a handful of commands that can help us out. Some personal favorites are:


 `head` - read the first 10 lines from the first 10 columns
 `summary` - does simple mathematical calculations on your data set
 `str` - displays 10 values from each column, with their data type
 `View` - creates a table in another tab
 `class` -
 
```{r read through, eval = TRUE}

head(acacia)
str(acacia)
#summary(acacia)

```
After using the `str()` function, we see some small oddities in our data set. *Why is height a character vector?* This can be an issue for some of the mathematical calculations. 

Let's try and find where the issue lies.
For Data Frames, we sort by Row, Then Column. By using `df[Row,Column]`
If you run `df[,X]`, you will get the full list of values from a Column.

We can also use `$` as to sort through columns.

```{r}
acacia[8,2] 

head(acacia[8])

acacia$HEIGHT

```
There are values in *HEIGHT* that we cannot keep. This is stopping us from treating HEIGHT as an integer.
Let's replace those values.
``` {r replace}
col_height <- as.numeric(acacia$HEIGHT)
acacia$HEIGHT <- col_height
```
By running this command, we have **coerced** the character strings into NA values. This way, we can run mathematical statistics on the daat set.

If we caught this earlier, maybe *before* we imported the data set, we could've forced NAs during import. 
``` {r}
acacia <- read.table(acacia_csv, header = TRUE, sep = "\t", na.strings = "dead")
```
Can we make a graph from this data? 
-----------------------------------
```{r graph step 1}
plot(x=acacia$HEIGHT,y=acacia$AXIS1)
```
The `plot` function is useful, but not powerful. Its hard to add titles, and even more difficult to change plot types. How could you ever do a heatmap via plot? You can't. So instead we use `ggplot`.

How do we use ggplot?
----------------------

That's a goood question.
```{r graph step 2}
library(ggplot2)
ggplot(data=acacia, mapping = aes(x=HEIGHT, y= AXIS1, color = TREATMENT)) +
  geom_point() +
  labs(x="Tree Height", y = "Tree Axis 1")
```
Use `geom_point()` to create a scatter plot.


What if we want to reshape our axes? 
We have functions to `scale()` the data set.
```{r graph step 3}
ggplot(data = acacia, mapping = aes(x = HEIGHT, y = FRUITS, color = ANT)) +
  geom_point(size = 3, alpha= 0.5) +
## Use facet_wrap 
  facet_wrap(~ANT, scales = "free")
  
##Add in geom_smooth() for data insight##
  
ggplot(data = acacia, mapping = aes(x = CIRC, y = HEIGHT, color = TREATMENT)) +
  ##alpha is a modifier of point transparaceny
  geom_point(size = 3, alpha = 0.667) + 
  geom_smooth() #method = " +
  ggsave(filename = "jw_acacia_treatment.jpg")

```
You must always call `ggplot` to access any of its graphical interface. The differences lie in the interlayed functions.

```{r graphs3_4}
ggplot(data=acacia, mapping = aes(x=TREATMENT)) +
  geom_bar()
```
```{r}
ggplot(acacia, aes(x=CIRC, color= TREATMENT)) +
  ## `bins = ` defines how many boxes are displayed 
  ## `Fill = ` is for color 
  geom_histogram(bins = 20, fill = "slategray3")
  #ggsave("../197-figures/acacia_Circ_by_treatment.jpg")
```


